
<script>

function submitForm() {                                                         
  if(validateForm())                                                            
    document.getElementById('userdata').submit();                          
                                                                                
}                                                                               
                                                                                
function validateForm(){                                                        
    first_name = document.getElementById('user_first_name');                      
    last_name = document.getElementById('user_last_name');                      
    user_role = document.getElementById('user_role');                      

    if(first_name.value == '') {                                                     
      alert("Please enter user first name ...");                                     
      return false;                                                             
    }else if(last_name.value == '') {                                                     
      alert("Please enter user last name ...");                                     
      return false;                                                             
    }else if(user_role.value == '') {                                                     
      alert("Please select user role ...");                                     
      return false;                                                             
    }                               
                                      
    return true;                                                                  
  }    

</script>



<div class="content-details">

<%= form_tag('/user/edit', method: 'post', enctype: 'multipart/form-data', id: 'userdata') do %>

<div class="box-body">

  <div class="form-group">
    <label for="firstname">First name</label>
    <%=text_field(:user, :first_name, :class =>'form-control', :placeholder => "First name",:value => @user.first_name) %> 
  </div>

  <div class="form-group">
    <label for="lastname">Last name</label>
    <%=text_field(:user, :last_name, :class =>'form-control', :placeholder => "Last name",:value => @user.last_name) %> 
  </div>

  <div class="form-group">
    <label for="email">Email</label>
    <%=text_field(:user, :email, :class =>'form-control', :placeholder => "Email",:value => @user.email) %> 
  </div>
  <%
    if @user.role == 'admin'
      role = ['Administrator','admin']
    else
      role = ['Standard','normal']
    end
  %>
  <% @roles = [role, ['Standard','normal'], ['Administrator','admin']]%> 
  <div class="form-group">
    <label for="role">User role</label>
    <%= select_tag "user[role]", options_for_select(@roles),:class =>'form-control', :placeholder => "Select user role" %>
  </div>

  <input type='hidden' name='edit_action' value = 'edit' />
  <input type='hidden' name='username' value = "<%=params[:username]%>" />

  <div class="form-group">
    <label for="email">&nbsp;</label>
    <input onclick="submitForm();" type="button" id="signup" 
      class="btn btn-primary signup_btn" value="Update" style="width:10%;" />
  </div>

</div>
                      
 <%end%>
</div>                                                      

